# DR_0005

- span: L3411-L3454
- sha256: 698a5d1cc88cb2fd8c3e3ba0cd9283ffb75e897cc98472279b71fa08f27a7e88
- tags: onramp, integration, testing, compliance, ui
- importance: M

## –ß—Ç–æ —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è
### Primary findings
> üéØ **–≠—Ç–∞–ø 6 ‚Äî –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Roadmap —Ä–∞–∑–≤–∏—Ç–∏—è on-ramp –±–æ—Ç–∞**  
> (–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ fail-closed –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, UX —Å–¥–µ–ª–∫–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å)
> 
> ---
> 
> ## üß≠ –¢–∞–±–ª–∏—Ü–∞ —Ñ–∞–∑: S0 ‚Ä¶ S6
> 
> | –§–∞–∑–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –¶–µ–ª—å | –ö–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ | –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (DoD) | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
> |------|----------|------|------------------|-----------------------------|-------------|
> | **S0** | `Stabilize & Secure` | –°–¥–µ–ª–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |  
> - –í–∞–ª–∏–¥–∞—Ü–∏—è `.env` –∏ config  
> - Fail-closed –ø—Ä–æ–≤–µ—Ä–∫–∏ KYC/–ª–∏–º–∏—Ç–æ–≤  
> - –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤  
> - Exception middleware  
> | CI –ø—Ä–æ–≥–æ–Ω—è–µ—Ç—Å—è, –¥–∏–ø–ª–∏–Ω–∫ –Ω–µ —Å—Ç—Ä–æ–∏—Ç—Å—è –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ KYC/–ª–∏–º–∏—Ç–∞ | –Ω–µ—Ç |
> | **S1** | `Data Integrity` | –ò—Å–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω –º–µ–∂–¥—É –∫–æ–Ω—Ñ–∏–≥–æ–º –∏ –∫–æ–¥–æ–º |  
> - –°—Ç—Ä–æ–≥–∏–µ —Å—Ö–µ–º—ã CSV/YAML  
> - Canonical ID –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤  
> - `_load_data()` –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ  
> | –õ—é–±–æ–π YAML/CSV –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è —Å—Ö–µ–º–æ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ | S0 |
> | **S2** | `UX Hardening` | –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏ –∏ —É–ª—É—á—à–∏—Ç—å user flow |  
> - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è —Å—É–º–º—ã/–∫–æ—à–µ–ª—å–∫–∞  
> - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ nationality/residence  
> - –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö /start  
> | FSM —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Ç—É–ø–∏–∫–æ–≤, UX –ø–æ–∫—Ä—ã—Ç e2e —Ç–µ—Å—Ç–æ–º | S1 |
> | **S3** | `Dynamic Scoring & Decline Index` | –î–æ–±–∞–≤–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ |  
> - –†–∞—Å—á—ë—Ç —Å–∫–æ—Ä–∏–Ω–≥–∞ –ø–æ –ª–∏–º–∏—Ç–∞–º/–∫–æ–º–∏—Å—Å–∏–∏  
> - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Decline Index  
> - –í—ã–Ω–µ—Å–µ–Ω–∏–µ —Å–∫–æ—Ä–∏–Ω–≥–∞ –≤ weights.yml |  
> Decline Index –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω, —Å–∫–æ—Ä–∏–Ω–≥ –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥ | S2 |
> | **S4** | `CI/CD & Tests` | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ |  
> - GitHub Actions: linters, schema tests  
> - TruffleHog pre-commit  
> - Coverage badge + doc build |  
> PR –Ω–µ –º–µ—Ä–∂–∏—Ç—Å—è –±–µ–∑ CI –∑–µ–ª—ë–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ | S3 |
> | **S5** | `Localization & Growth` | –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ |  
> - UI –∫–æ–Ω—Ñ–∏–≥–∏ —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏  
> - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω/–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤  
> - Alerting –ø—Ä–∏ —Å–±–æ—è—Ö –¥–∏–ø–ª–∏–Ω–∫–æ–≤ |  
> –ó–∞–ø—É—Å–∫ –Ω–∞ EN/FR, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ –ø–æ webhook | S4 |
> | **S6** | `Loyalty & UX Analytics` | –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≤–æ–≤–ª–µ—á–µ–Ω–∏–µ |  
> - –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏/–æ—Ç–∫–∞–∑–∞  
> - ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç –¥–∏–ø–ª–∏–Ω–∫–∞ –¥–æ –∫–æ–Ω—Ü–∞  
> - –°—á—ë—Ç—á–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |  
> –ü–æ –∫–∞–∂–¥–æ–º—É –¥–∏–ø–ª–∏–Ω–∫—É –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –º–µ—Ç–∞-–∏–Ω—Ñ–∞ | S5 |
> 
> ---
> 
> ‚úÖ –î–∞–ª–µ–µ: **–≠—Ç–∞–ø 7 ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –∫–æ–¥–∞ –∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤** –¥–ª—è —Ñ–∞–∑ S0‚ÄìS3 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å). –ë—É–¥–µ—Ç:
> 
> - –î–∏—Ñ—Ñ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Ñ–∞–π–ª–∞–º (`core/`, `bot/`, `config/`, `.env.example`)
> - –ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏: `schema_validator.py`, `aggregators.yml`, `ci.yml`
> - API —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∏ type hints  
> - –ì–æ—Ç–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ + CI YAML + –ø—Ä–∏–º–µ—Ä—ã .env
> 
> –ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å?

### Secondary findings
- None

## –ß—Ç–æ –º–µ–Ω—è—Ç—å –≤ —Ä–µ–ø–æ
- bot/
- core/
- docs/compliance/
- integrations/
- static/
- templates/
- tests/

## DoD
- HTTP 200 from integration endpoints
- UX review accepted
- manual review by compliance officer
- pytest -q passes

## Risks
- API rate limits
- KYC limitations
- flaky tests
- regulatory changes
- third-party downtime
