category:
- onramp
- testing
- compliance
- ui
claims:
- kind: primary
  text: "\U0001F680 **–≠—Ç–∞–ø 5 ‚Äî –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (To-Be Model)**\n\n---\n\n## \U0001F9F1\
    \ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –º–æ–¥–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ on-ramp –±–æ—Ç–∞\n\n### \U0001F4D0 –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–ª–∞–Ω\
    \ (4-—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)\n\n```plantuml\n@startuml\npackage \"App (bot/)\" {\n\
    \  [FSM States]\n  [Handlers]\n  [Telegram UI Texts]\n}\n\npackage \"Domain (core/)\"\
    \ {\n  [AggregatorSelector]\n  [DeeplinkBuilder]\n  [KYC & Limits Validator]\n\
    \  [Decline Index Engine]\n}\n\npackage \"Data (config/ + data/)\" {\n  [aggregators.yml]\n\
    \  [weights.yml]\n  [CSV Tables]\n  [Schemas (Pydantic)]\n}\n\npackage \"Infra\
    \ & CI\" {\n  [env loader]\n  [logger]\n  [GitHub Actions]\n  [Test coverage]\n\
    }\n@enduml\n```\n\n---\n\n## \U0001F4E6 –û–ø–∏—Å–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤\n\n| –°–ª–æ–π\
    \        | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                     | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |\n|-------------|-------------------------------|------------|\n\
    | `App`       | `FSM (aiogram)`               | –õ–æ–≥–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π + —Ä–æ—É—Ç–∏–Ω–≥ |\n\
    |             | `UI —Ç–µ–∫—Å—Ç–æ–≤–∫–∏ –∏–∑ config`      | –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å\
    \ |\n| `Domain`    | `AggregatorSelector`          | –í—ã–±–æ—Ä –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ –ø–æ —Å–∫–æ—Ä–∏–Ω–≥—É/–ª–∏–º–∏—Ç–∞–º\
    \ |\n|             | `DeeplinkBuilder (Jinja2)`    | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL —Å fail-closed\
    \ |\n|             | `Decline Index Engine`        | –†–µ–π—Ç–∏–Ω–≥ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤ –ø–æ –æ—Ç–∫–∞–∑–∞–º\
    \ |\n|             | `KYC Validator`               | –ü—Ä–æ–≤–µ—Ä–∫–∞ KYC –∏ –ª–∏–º–∏—Ç–æ–≤ –¥–æ\
    \ –¥–∏–ø–ª–∏–Ω–∫–∞ |\n| `Data`      | `aggregators.yml`             | –ú–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ –ø–æ –ª–∏–º–∏—Ç–∞–º/—Ä–µ–≥–∏–æ–Ω—É\
    \ |\n|             | `weights.yml`                 | –í–µ—Å–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∫–æ—Ä–∏–Ω–≥–∞\
    \ |\n|             | `schemas/*.py`                | –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã\
    \ –¥–∞–Ω–Ω—ã—Ö |\n| `Infra/CI`  | `.env.example`                | –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏\
    \ –ø—É—Ç–µ–π |\n|             | `GitHub Actions`              | –¢–µ—Å—Ç—ã + –ª–∏–Ω—Ç–µ—Ä + schema-guard\
    \ |\n|             | `TruffleHog`                  | –ü–æ–∏—Å–∫ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ push |\n\
    |             | `pytest + e2e FSM`            | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø—É—Ç–µ–π –æ—Ç /start\
    \ –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–∫–∏ |\n\n---\n\n### \U0001F4CB –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏\n\n- **Fail-closed\
    \ by design** ‚Äî –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ KYC/–ª–∏–º–∏—Ç–∞.\n- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ\
    \ –¥–∞–Ω–Ω—ã–µ (Decline, Fees)** ‚Äî CI –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—ã.\n- **–ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**\
    \ ‚Äî schema-guard –≤ YAML/CSV/JSON.\n- **–ú—É–ª—å—Ç–∏-–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π FSM** ‚Äî –≤–æ–∑–≤—Ä–∞—Ç, –æ—Ç–º–µ–Ω–∞,\
    \ –ø–æ–¥—Å–∫–∞–∑–∫–∏.\n- **–ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî UI-—Ç–µ–∫—Å—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ config –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç\
    \ –ª–æ–∫–∞–ª–∏.\n\n---\n\n‚úÖ –≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à—ë–Ω. –ü–µ—Ä–µ—Ö–æ–∂—É –∫ **–≠—Ç–∞–ø—É 6 ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ Roadmap\
    \ –ø–æ —Ñ–∞–∑–∞–º S0‚Ä¶S6**.  \n–í—ã–¥–∞–º —Ñ–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –¥–µ–π—Å—Ç–≤–∏—è, DoD, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏."
id: DR_0004
recommendations:
- change: review and implement recommendations
  dod:
  - UX review accepted
  - manual review by compliance officer
  - pytest -q passes
  impact_paths:
  - bot/
  - docs/compliance/
  - static/
  - templates/
  - tests/
  risks:
  - KYC limitations
  - flaky tests
  - regulatory changes
sha256: 2d89ba8e0334cb78464e26fb21c6b552c2905386a1c00974dc622d0af2aefe39
span: L3324-L3369
title: üöÄ **–≠—Ç–∞–ø 5 ‚Äî –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (To-Be Model)**
trace:
  file: updates/21-9-43-Bot_Development_Roadmap_Analysis.json
  source_spans:
  - L3324-L3369
